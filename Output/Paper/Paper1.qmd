---
title: "Evaluating Modern vs. Older Buildings: Detailed Analysis on the Apartment Building Evaluation 2023"
author: "Zhijun Zhong"
thanks: "Files, Codes and Paper are Availiable at https://github.com/JerrZzzz/Paper-1.git"
date: "today"
date-format: "long"
abstract: "This paper utilizes the Apartment Building Evaluation data from OpenDataToronto to investigate the common renter criteria that a building's construction year is a crucial factor in selecting a residence. Additionally, we compares scores across various aspects, such as windows and building cleanliness, for buildings constructed in specific years, further testing renters' theories."
format: pdf
editor: visual
toc: true
number-sections: true
bibliography: ref.bib
---

```{r}
#| message: false
#| echo: false

# load package
library(opendatatoronto)
library(knitr)
library(janitor)
library(tidyverse)
library(lubridate)
library(ggplot2)
library(dplyr)
library(readr)

# read previously cleaned data
file_path <- "/cloud/project/Output/Data/cleaned_Buildingeval_data.csv"
bu_eval <- read_csv(file_path, show_col_types = FALSE)

# read previously created data
file_path2 <- "/cloud/project/Output/Data/data_frequency.csv"
data_frequency <-
  read_csv(
    file_path2,
    show_col_types = FALSE
  )
```

# Introduction

Approximately 33.1% of Canadians are renters in today's society [@cite1]. This statistic prompts an investigation into the factors influencing their housing choices. Youqin Huang's also did a similar study on renters' behavior in China, where housing decisions are deeply affected by socio-economic and institutional factors [@renter], it raises the question: What criteria do Canadian renters use when selecting a home? This paper seeks to explore how renters discern the value of a property based on limited information, such as online images. Key considerations might include the number of units, storeys, or the age of the building. Specifically, the paper examines whether newer buildings are more appealing to renters than older ones.

By our everyday logical reasoning, we might expect that buildings constructed a long time ago would pose numerous issues and require extensive maintenance. In Peng, Zhen and etc.'s paper *Retrofit or rebuild? The future of old residential buildings in urban areas of China based on the analysis of environmental benefits* [@oldbuildissue], they talked about what issue senior building which constructed in 1970s till 1990s. They believed that there is a significant issue towards those building especially without sufficient insulation and ventilation. Moreover, these buildings are now approaching the end of their designed service life they also say [@oldbuildissue]. Therefore, we could hypothesize that older buildings would have lower scores, while modern buildings would score higher. Moreover, it is often challenging for older buildings to achieve standards in aspects like windows and building cleanliness compared to modern buildings. Thus, we can infer that there is a specific relationship between the year of construction and the evaluation score. In this paper, I will explore different aspects and inform future renters about the factors they need to consider before choosing an apartment in a specific building. However, before discussing the data and plotting graphs, we need to set aside our stereotypes.

This paper involved extensive coding. Utilizing ChatGPT was an efficient method for data cleaning and graph creation [@chatgpt]. It means that all the code for the graphs in this paper, as well as the code for data cleaning and simulation, were generated by ChatGPT and reviewed and edited by the author (Zhijun Zhong).

To fully understand the relationship between the year of construction and the evaluation score, I have divided this paper into data, results, discussion, and conclusion sections. All data were obtained from the OpenDataToronto package [@citeopendata]. In the data section, I will select relevant parts of my cleaned data to explain what each column represents. The results section will present all the graphs useful in analyzing the relationship. In the discussion section, I will interpret these graphs and offer my conclusions based on the provided data. Finally, the conclusion will summarize the entire paper and my main points.

# Data

All data manipulated and presented in this paper were sourced from OpenDataToronto [@citeopendata]. The code was generated by ChatGPT [@chatgpt]. Data collection and analysis were conducted using the statistical programming software R [@r], with the following packages aiding in data collection, analysis, and graphing: opendatatoronto [@citeopendata], knitr [@knitr], janitor [@janitor], tidyverse [@tidyverse], lubridate [@lubridate], ggplot2 [@ggplot2], and dplyr [@dplyr].

The dataset obtained from OpenDataToronto, titled "Apartment Building Evaluations 2023," contains an extensive amount of information, making it challenging to present in a single table. In the following parts of the data section, I will showcase different columns and discuss their meanings.

## Main Columns (Year, Score)

```{r main, message: false, echo: false, label: main, tbl-cap: Year and Score}
#| message: false
#| echo: false
#| label: main

# select column of year and score with help of Chatgpt
selected_data <- bu_eval %>%
  select(year, score) %>%
  head(5)

# create a table of the selected data
kable(selected_data, caption = "Year and Score", align = 'c')
```

We can get a glimpse of what the 'year' and 'score' columns look like in the dataset (see Table 1). The 'year' column indicates the year when the building was constructed. For instance, in the first row, the year 1990 means that the building was constructed in 1990, and as of 2023, it has achieved a score of 88. The 'score' is a scale ranging from 0 to 100, summarizing various aspects like windows, building cleanliness, etc., which I will elaborate on later. Essentially, in this dataset, the construction year and the score a building achieves are our primary focus.

## Secondary Columns (Decade and Average_score)

```{r sec, message: false, echo: false, label: secondary_col, tbl-cap: secondary columns}
#| message: false
#| echo: false
#| label: sec

# select column decade and average scorewith help of Chatgpt
selected_sec_data <- bu_eval %>%
  select(Decade, Average_Score) %>%
  head(5)

##create a table using the data above 
kable(selected_sec_data, caption = "Decade and Average Scores", align = 'c')
```

As shown in this table (see Table 2), which consists of two columns named "decade" and "average_score", we address the dispersal of years in the 'year' column. The original year data is too scattered for effective graphical representation. Hence, I created a column named 'decade' based on the 'year' column, which indicates the decade of the original year. For example, a building constructed in 1943 would be listed under the 1940s decade. 'Average_score' means the average score of each decade. It represents the average score achieved by all buildings within that decade as of 2023.

## Other columns

```{r oth, message: false, echo: false, label: other, tbl-cap: other columns}
#| message: false
#| echo: false
#| label: oth

## select all the evaluation standards, address and number of storeys and units with help of Chatgpt
selected_other_data <- bu_eval %>%
  select(address, storeys, units, parkings, elevators, 
         windows, cleanliness) %>%
  head(5)

##create a table using the data above 
kable(selected_other_data, caption = "Other Columns", align = 'c')
```

In this table (see Table 3), 'address' refers to the building's address, such as 3179 Yonge St. 'storeys' and 'units' denote the number of storeys and units in the building, respectively. Meanwhile, 'parking', 'elevator', 'windows', and 'cleanliness' are four randomly chosen evaluation standards, each scaled from 0 to 3, with higher scores indicating better quality.

## Frequency of Full score on category in 1950 and 2000

```{r, message: false, echo: false, label: other, tbl-cap: other columns}
#| message: false
#| echo: false
#| label: freq

## select all the column from the created data set above with help of Chatgpt
selected_freq_data <- data_frequency %>%
  select(Year, Category, Value) %>%
  head(5)

##create a table using the data above 
kable(selected_freq_data, caption = "Freq Columns", align = 'c')
```

In the above table (see Table 4), 1950 and 2000 as two representative decades have the percentage of buildings achieving full marks in various categories for each decade. Each decade had four categories, followed by the probability of achieving full marks. For instance, for all buildings constructed in the 2000s, the probability of achieving full marks in building cleanliness is 82.76%.

This concludes the overview of the data we have cleaned from the OpenDataToronto package. The original data can be downloaded here: https://open.toronto.ca/dataset/apartment-building-evaluation/.

# Results

Dividing the results into three parts is crucial to understanding the questions we raised at the beginning of the paper. I will analyze different aspects of my data using graphs and plots to answer these questions. In section 3.1, I will present the relationship between the built year and the score. Section 3.2 provides a detailed comparison between categories and the percentage of full scores achieved. Finally, in section 3.3, I will explore whether there is a connection between the number of units, the number of storeys, and the score.

## Built year vs. Score

To understand the relationship between the year a building was built and its score, it is beneficial to draw a graph examining whether the score depends on the year of construction. With assistance from ChatGPT [@chatgpt], I have developed a graph illustrating the score by year (See Fig 1). Although the pattern in the figure is not entirely clear, it is noticeable that there are a few data points from the 1950s achieving very low scores. However, throughout the 20th century, these older buildings do achieve very high scores, even surpassing those constructed in the 21st century.

```{r, fig.height=3, fig.width=5, fig.align='center', fig.cap="Comparing Year with Respect of Score"}
#| message: false
#| echo: false
#| label: fig1

## create a graph of year vs. score with help of Chatgpt
ggplot(bu_eval, aes(x = year, y = score)) +
  geom_point() +
  labs(x = "Year", y = "Score", title = "Scores by Year") +
  theme_minimal()
```

Since we cannot draw definitive conclusions from the graph above, creating a graph that calculates the mean score for each decade can provide a much clearer understanding of the overall pattern or relationship between year and score. The following graph, which displays the relationship between decade and average score per decade (see Fig 2), reveals an obvious upward trend. Given the limited number of data points before 1900-possibly due to many older buildings being replaced with modern constructions-it is better to focus on data from post-1900.

```{r, fig.height=2, fig.width=4, fig.align='center', fig.cap="Comparing decade with average scores"}
#| message: false
#| echo: false
#| label: fig2
#| tbl_cap: fig2

## create a graph of decade vs. average score with help of Chatgpt
ggplot(bu_eval, aes(x = Decade, y = Average_Score)) +
  geom_point() +
  labs(x = "decade", y = "average scores", title = "Plot of decades on average scores") +
  theme_minimal()
```

## Percentage vs. Category

The data in Section 2.4 were specifically designed to suit the analysis in the following graph (see Fig 3). Here, the x-axis represents the category, while the y-axis shows the percentage of buildings achieving full marks. The "blue" bar represents data from the 2000s, and the "red" bar represents data from the 1950s. The graph clearly illustrates a significant difference between the two decades, with buildings constructed in the 2000s more likely to achieve full marks in all categories compared to those built in the 1950s.

```{r, fig.height=3, fig.width=5, fig.align='center', fig.cap="Comparing Category with Percentage of Achieveing Full Mark"}
#| message: false
#| echo: false
#| label: fig3
#| tbl_cap: fig3

## create a bar chart of evaluation standard vs. percentage with help of Chatgpt
ggplot(data_frequency, aes(x = Category, y = Value, fill = as.factor(Year))) +
  geom_bar(stat = "identity", position = position_dodge()) +
  scale_fill_brewer(palette = "Set1") + 
  labs(x = "Category", y = "Percentage", title = "Percentage for buildings of achieving a full Mark") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

## Unit number, Storey number vs. Score

Additionally, I was keen to explore the relationship of scores based on unit or storey numbers. After plotting graphs of scores against unit numbers (see Fig 4) and storey numbers (see Fig 5), a similar pattern emerges in both graphs. For buildings with a lower count of units (under 50) and storeys (under 10), scores vary widely, ranging from below 25 to 100. Conversely, buildings with a higher count of units (over 200) and storeys (above 20) tend to have scores consistently above 75.

```{r, fig.height=3, fig.width=5, fig.align='center', fig.cap="Comparing Score with Unit Number"}
#| message: false
#| echo: false
#| label: fig4
#| tbl_cap: fig4

## create a graph of unit number vs. score with help of Chatgpt
ggplot(bu_eval, aes(x = units, y = score)) +
  geom_point() +
  labs(x = "Unit number", y = "Score", title = "Score vs. Unit number") +
  theme_minimal()
```

```{r, fig.height=3, fig.width=5, fig.align='center', fig.cap="Comparing Score with Storey Number"}
#| message: false
#| echo: false
#| label: fig5
#| tbl_cap: fig5

## create a graph of storeys number vs. score with help of Chatgpt
ggplot(bu_eval, aes(x = storeys, y = score)) +
  geom_point() +
  labs(x = "Storey number", y = "Score", title = "Score vs. storey number") +
  theme_minimal()
```

# Discussion

In order to answer the important question posed at the beginning of the paper -- whether it is typically a better choice for renters to choose for buildings constructed more recently rather than older ones -- we need to closely examine the data. By analyzing the 'score by year' graph (see Fig 1), we observe that not all older buildings score low. For instance, some buildings from the 1960s, such as one constructed in 1965 located at 24 Tyndall Ave, achieved a perfect score of 100. However, the 'decades vs. average scores' plot (see Fig 2) reveals a significant score difference of about 10 points between buildings constructed in 1900 and those in 2000. Although the data does not provide enough explanation to evaluate the significance of a 10-point difference, a trend is enough where newer buildings are more likely to achieve higher scores.

Before drawing conclusions, let's revisit Fig 1. Noticeable outliers[^1], such as a building built in 1954 at 5 A Jasper Ave with a score of 17 out of 100, do bring the overall average down. Yet, denying the average score graph entirely would be hasty. A closer inspection of Fig 1 reveals that, excluding outliers, the score range for the 20th century (approximately 60 to 100) is still broader than that of the 21st century (about 82 to 100). Even with a 90% quantile or percentile adjustment, the pattern of increasing scores is unlikely to change significantly due to the dataset's size and score range.

[^1]: **Outlier**: Outliers in statistical analyzing are often refer to some certain data observations which are obviously outside of the common sense. For example, a column data set record the age of student going to STA302's class and there is one observation saying 80 which is an obvious special case. By Singh's paper[@outlier], we can say that our outlier here is a point outlier. He defines it as that if one of the data point can be considered as "anomalous", then it is a point outlier.

Additionally, the detailed analysis of different categories further supports that newer buildings tend to score higher. As shown in Fig 3, the likelihood of achieving full marks in categories like cleanliness, windows, and elevators is much higher for buildings from the 2000s compared to the 1950s. Focusing on cleanliness, since some older buildings lack elevators, we find that 82.76% of buildings from the 2000s achieve full marks in cleanliness, compared to 66.0% from the 1950s. This implies that out of 100 buildings constructed in the 1950s, about 66 would achieve full marks in cleanliness, while approximately 82 out of 100 buildings from the 2000s would.

Figures 4 and 5 explore the relationship between the number of units, the number of storeys, and scores. Contrary to the belief that a higher number of units or storeys hardened management and cleaning, the data does not show a specific pattern indicating a relationship. Buildings of varying unit and storey numbers have achieved high scores, suggesting that renters should not base their judgment solely on these factors.

# Conclusion

In conclusion, thanks to data from OpenDataToronto [@citeopendata], we were able to discuss and analyze the relationship between a building's year of construction and its achieved score. We found that older buildings might not score as high as newer ones on average. Therefore, this paper supports the notion of using the year of construction as a criterion, while not denying the quality of older buildings exclusively. However, we maintain the recommendation for renters not to use unit number and storey number as their primary judgment criteria.

# Reference

**Reference From ref.bib: 

